<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>设计模式-单例模式 - 袁阊越</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="设计模式-单例模式" />
<meta property="og:description" content="单例模式  这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。保证一个类仅有一个实例，并提供一个访问它的全局访问点。
 单例&mdash;饿汉式  类初始化直接创建对象 不管是否需要这个对象 线程安全
/** * &lt;p&gt; * 1. 构造器私有化 不能被实例化 * 2. 私有变量保存 * &lt;p&gt; * @author: YuanChangYue * @create: 2019-10-08 14:05 */ public class Singleton1 { public static final Singleton1 INSTANCE = new Singleton1(); private Singleton1() { } }  枚举类 该类型的对象只有几个有限的状态 通过限定一个 就是单例了
/** * @author: YuanChangYue * @create: 2019-10-08 14:05 */ public enum Singleton2 { //单例 INSTANCE }  在静态块中初始化，从properties文件中读取带参构造器的值。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/post/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" />
<meta property="article:published_time" content="2019-10-30T14:13:05+08:00" />
<meta property="article:modified_time" content="2019-10-30T14:13:05+08:00" />

	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="设计模式-单例模式"/>
<meta name="twitter:description" content="单例模式  这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。保证一个类仅有一个实例，并提供一个访问它的全局访问点。
 单例&mdash;饿汉式  类初始化直接创建对象 不管是否需要这个对象 线程安全
/** * &lt;p&gt; * 1. 构造器私有化 不能被实例化 * 2. 私有变量保存 * &lt;p&gt; * @author: YuanChangYue * @create: 2019-10-08 14:05 */ public class Singleton1 { public static final Singleton1 INSTANCE = new Singleton1(); private Singleton1() { } }  枚举类 该类型的对象只有几个有限的状态 通过限定一个 就是单例了
/** * @author: YuanChangYue * @create: 2019-10-08 14:05 */ public enum Singleton2 { //单例 INSTANCE }  在静态块中初始化，从properties文件中读取带参构造器的值。"/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="袁阊越" rel="home">
				<div class="logo__title">袁阊越</div>
				<div class="logo__tagline">There&#39;s only being in and then being out.</div>
			</a>
		</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">设计模式-单例模式</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2019-10-30T14:13:05">2019-10-30</time>
</div>
</div>
		</header>
<div class="post__toc toc">
	<div class="toc__title">Page content</div>
	<div class="toc__menu">
		<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#单例模式">单例模式</a>
<ul>
<li><a href="#单例-饿汉式">单例&mdash;饿汉式</a></li>
<li><a href="#单例-懒汉式">单例&ndash;懒汉式</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
	</div>
</div>
<div class="content post__content clearfix">
			

<h2 id="单例模式">单例模式</h2>

<blockquote>
<p>这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。保证一个类仅有一个实例，并提供一个访问它的全局访问点。</p>
</blockquote>

<h3 id="单例-饿汉式">单例&mdash;饿汉式</h3>

<ul>
<li><p>类初始化直接创建对象 不管是否需要这个对象 线程安全</p>

<pre><code class="language-java">/**
* &lt;p&gt;
* 1. 构造器私有化 不能被实例化
* 2. 私有变量保存
* &lt;p&gt;
* @author: YuanChangYue
* @create: 2019-10-08 14:05
*/
public class Singleton1 {

public static final Singleton1 INSTANCE = new Singleton1();

private Singleton1() {

}
}
</code></pre></li>

<li><p>枚举类 该类型的对象只有几个有限的状态 通过限定一个 就是单例了</p>

<pre><code class="language-java">/**
* @author: YuanChangYue
* @create: 2019-10-08 14:05
*/
public enum Singleton2 {
//单例
INSTANCE
}

</code></pre></li>

<li><p>在静态块中初始化，从properties文件中读取带参构造器的值。</p>

<pre><code class="language-java">/**
* @author: YuanChangYue
* @create: 2019-10-08 14:05
*/
public class Singleton3 {
public static final Singleton3 INSTANCE;
private String info;

static {
    try {
        Properties properties = new Properties();
        properties.load(Singleton3.class.getClassLoader().getResourceAsStream(&quot;single.properties&quot;));
        INSTANCE = new Singleton3(properties.getProperty(&quot;info&quot;));
    } catch (IOException e) {
        throw new RuntimeException();
    }
}

private Singleton3(String info) {
    this.info = info;
}

@Override
public String toString() {
    return &quot;Singleton3{&quot; +
            &quot;info='&quot; + info + '\'' +
            '}';
}
}
</code></pre></li>
</ul>

<h3 id="单例-懒汉式">单例&ndash;懒汉式</h3>

<ul>
<li><p>延迟创建一个实例对象 线程安全问题  出现创建不同的对象</p>

<pre><code class="language-java">/**
* 1. 构造器私有化
* 2. 用静态变量保存
* 3. 提供一个静态方法 获取这个实例对象
* @author: YuanChangYue
* @create: 2019-10-08 14:41
*/
public class Singleton4 {
private static Singleton4 instance;

private Singleton4() {
}

public static Singleton4 getInstance() {
    if (instance == null) {
        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        instance = new Singleton4();
    }
    return instance;
}
}
</code></pre></li>

<li><p>单例&ndash;懒汉式  延迟创建一个实例对象 使用<strong>synchronized</strong>保证 线程安全</p>

<pre><code class="language-java">/**
* 1. 构造器私有化
* 2. 用静态变量保存
* 3. 提供一个静态方法 获取这个实例对象
* @author: YuanChangYue
* @create: 2019-10-08 14:41
*/
public class Singleton5 {
private static Singleton5 instance;

private Singleton5() {
}

public static Singleton5 getInstance() {
    if (instance == null) {
        synchronized (Singleton5.class) {
            if (instance == null) {
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                instance = new Singleton5();
            }
        }
    }
    return instance;
}
}
</code></pre></li>

<li><p>单例&ndash;懒汉式 延迟创建一个实例对象 <strong>通过内部类初始化</strong> 线程安全</p>

<pre><code class="language-java">/**
* 1. 构造器私有化
* 2. 用内部类初始时才创建
* 3. 提供一个静态方法 获取这个实例对象
* @author: YuanChangYue
* @create: 2019-10-08 14:41
*/
public class Singleton6 {

private Singleton6() {
}

private static class Inner {
    private static final Singleton6 INSTANCE = new Singleton6();
}

public static Singleton6 getInstance() {
    return Inner.INSTANCE;
}

}
</code></pre></li>
</ul>

		</div>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="袁阊越 avatar" src="/post/img/avatar.jpg" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">About 袁阊越</span>
	</div>
	<div class="authorbox__description">
		There&#39;s only being in and then being out.
	</div>
</div>

<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/post/mybatis%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/" rel="prev"><span class="post-nav__caption">«&thinsp;Previous</span><p class="post-nav__post-title">Mybatis原理浅析和践行</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/post/shiro%E5%88%9D%E8%AF%86/" rel="next"><span class="post-nav__caption">Next&thinsp;»</span><p class="post-nav__post-title">Shiro初识</p></a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2019 袁阊越.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>