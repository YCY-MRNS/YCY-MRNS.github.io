<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>SpringBoot与web开发(一)-----SpringBoot快速使用 - 袁阊越</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="SpringBoot与web开发(一)-----SpringBoot快速使用" />
<meta property="og:description" content="1. 开始使用  创建springBoot 应用 选择需要的模块  创建springboot
选择模块
 SpringBoot 已经为我们把需要的配置自动装配好，只需要在后续的开发中，在配置文件中进行设置即可
 编写代码
  2. 自动配置 XXXXXAutoConfiguration ：在容器中自动配置组件 XXXXXProperties ： 配置类  这些文件都在通过Mavan引入的外部库中，org.springframework.boot.autoconfigure。
3. 静态资源映射规则  默认创建的 SpringBoot 项目是没有web文件夹的，那如何映射css，js等静态资源呢？
 Spring boot 会自动装配WebMvcAutoConfiguration类，会对静态资源的映射做出规定,
@Override public void addResourceHandlers(ResourceHandlerRegistry registry) { if (!this.resourceProperties.isAddMappings()) { logger.debug(&quot;Default resource handling disabled&quot;); return; } Duration cachePeriod = this.resourceProperties.getCache().getPeriod(); CacheControl cacheControl = this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl(); if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) { customizeResourceHandlerRegistration(registry.addResourceHandler(&quot;/webjars/**&quot;) .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;) .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl)); } String staticPathPattern = this.mvcProperties.getStaticPathPattern(); if (!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/post/springboot%E4%B8%8Eweb%E5%BC%80%E5%8F%91%E4%B8%80/" />
<meta property="article:published_time" content="2019-08-10T20:15:09+08:00" />
<meta property="article:modified_time" content="2019-08-10T20:15:09+08:00" />

	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SpringBoot与web开发(一)-----SpringBoot快速使用"/>
<meta name="twitter:description" content="1. 开始使用  创建springBoot 应用 选择需要的模块  创建springboot
选择模块
 SpringBoot 已经为我们把需要的配置自动装配好，只需要在后续的开发中，在配置文件中进行设置即可
 编写代码
  2. 自动配置 XXXXXAutoConfiguration ：在容器中自动配置组件 XXXXXProperties ： 配置类  这些文件都在通过Mavan引入的外部库中，org.springframework.boot.autoconfigure。
3. 静态资源映射规则  默认创建的 SpringBoot 项目是没有web文件夹的，那如何映射css，js等静态资源呢？
 Spring boot 会自动装配WebMvcAutoConfiguration类，会对静态资源的映射做出规定,
@Override public void addResourceHandlers(ResourceHandlerRegistry registry) { if (!this.resourceProperties.isAddMappings()) { logger.debug(&quot;Default resource handling disabled&quot;); return; } Duration cachePeriod = this.resourceProperties.getCache().getPeriod(); CacheControl cacheControl = this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl(); if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) { customizeResourceHandlerRegistration(registry.addResourceHandler(&quot;/webjars/**&quot;) .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;) .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl)); } String staticPathPattern = this.mvcProperties.getStaticPathPattern(); if (!"/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="袁阊越" rel="home">
				<div class="logo__title">袁阊越</div>
				<div class="logo__tagline">There&#39;s only being in and then being out.</div>
			</a>
		</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot与web开发(一)-----SpringBoot快速使用</h1>
			<p class="post__lead">SpringBoot快速使用，自动配置，静态资源映射</p>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2019-08-10T20:15:09">2019-08-10</time>
</div>

<div class="meta__item-categories meta__item">
	<svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg>
	<span class="meta__text"><a class="meta__link" href="/categories/%e5%90%8e%e7%ab%af" rel="category">后端</a></span>
</div>
</div>
		</header>
<div class="post__toc toc">
	<div class="toc__title">Page content</div>
	<div class="toc__menu">
		<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#1-开始使用">1. 开始使用</a></li>
<li><a href="#2-自动配置">2. 自动配置</a></li>
<li><a href="#3-静态资源映射规则">3. 静态资源映射规则</a>
<ul>
<li><a href="#1-所有webjars-都会在classpath-meta-inf-resources-webjars-下面去找资源">1.  所有webjars/**都会在classpath:/META-INF/resources/webjars/下面去找资源</a></li>
<li><a href="#2-当前项目下的任何资源">2. **/ 当前项目下的任何资源</a></li>
<li><a href="#3-映射index页面">3. 映射index页面</a></li>
<li><a href="#4-页面的小图标-favicon">4. 页面的小图标 favicon</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
	</div>
</div>
<div class="content post__content clearfix">
			

<h2 id="1-开始使用">1. 开始使用</h2>

<ol>
<li>创建springBoot 应用 选择需要的模块</li>
</ol>

<p><div align=center><img src="/post/img/SpringBoot与web-1.png" alt="创建springboot" /></p>

<p>创建springboot</p>

<p><img src="/post/img/SpringBoot与web-2.png" alt="选择模块" /></p>

<p>选择模块</div></p>

<ol>
<li><p>SpringBoot 已经为我们把需要的配置自动装配好，只需要在后续的开发中，在配置文件中进行设置即可</p></li>

<li><p>编写代码</p></li>
</ol>

<h2 id="2-自动配置">2. 自动配置</h2>

<pre><code class="language-java">XXXXXAutoConfiguration  ：在容器中自动配置组件
XXXXXProperties  ： 配置类
</code></pre>

<p>这些文件都在通过Mavan引入的外部库中，org.springframework.boot.autoconfigure。</p>

<p><img src="/post/img/SpringBoot与web-5.png" alt="" /></p>

<p><img src="/post/img/SpringBoot与web-4.png" alt="" /></p>

<h2 id="3-静态资源映射规则">3. 静态资源映射规则</h2>

<blockquote>
<p>默认创建的 SpringBoot 项目是没有web文件夹的，那如何映射css，js等静态资源呢？</p>
</blockquote>

<p>Spring boot 会自动装配WebMvcAutoConfiguration类，会对静态资源的映射做出规定,</p>

<pre><code class="language-java">@Override
		public void addResourceHandlers(ResourceHandlerRegistry registry) {
			if (!this.resourceProperties.isAddMappings()) {
				logger.debug(&quot;Default resource handling disabled&quot;);
				return;
			}
			Duration cachePeriod = this.resourceProperties.getCache().getPeriod();
			CacheControl cacheControl = this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();
			if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) {
				customizeResourceHandlerRegistration(registry.addResourceHandler(&quot;/webjars/**&quot;)
						.addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;)
						.setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));
			}
			String staticPathPattern = this.mvcProperties.getStaticPathPattern();
			if (!registry.hasMappingForPattern(staticPathPattern)) {
				customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)
						.addResourceLocations(getResourceLocations(this.resourceProperties.getStaticLocations()))
						.setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));
			}
		}
</code></pre>

<h3 id="1-所有webjars-都会在classpath-meta-inf-resources-webjars-下面去找资源">1.  所有webjars/**都会在classpath:/META-INF/resources/webjars/下面去找资源</h3>

<div align=center>  ![](/post/img/SpringBoot与web-6.png) </div>

<ul>
<li>webjars :  以jar的形式引入  （<a href="https://www.webjars.org/">https://www.webjars.org/</a>）</li>
<li>好处： （1）将静态资源版本化，更利于升级和维护 （2）剥离静态资源，提高编译速度和打包效率（3）实现资源共享，有利于统一前端开发。</li>
<li>访问资源  localhost：8080/webjars/jquery/3.4.1/jquery.js</li>

<li><p>pom.xml</p>

<pre><code class="language-xml">&lt;dependency&gt;
        &lt;groupId&gt;org.webjars&lt;/groupId&gt;
        &lt;artifactId&gt;jquery&lt;/artifactId&gt;
        &lt;version&gt;3.4.1&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre></li>
</ul>

<h3 id="2-当前项目下的任何资源">2. **/ 当前项目下的任何资源</h3>

<pre><code class="language-java">@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)
public class ResourceProperties {

private static final String[] CLASSPATH_RESOURCE_LOCATIONS = { &quot;classpath:/META-INF/resources/&quot;,
		&quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; };

</code></pre>

<p>默认寻找静态资源的文件夹路径：</p>

<ul>
<li>classpath:/META-INF/resources/</li>
<li>classpath:/resources/</li>
<li>classpath:/static/</li>
<li>classpath:/public/</li>
<li>/</li>
</ul>

<p><strong>例如：</strong> localhost：8080/XXX  默认就去以上路径去找</p>

<h3 id="3-映射index页面">3. 映射index页面</h3>

<pre><code class="language-java">@Bean
public WelcomePageHandlerMapping welcomePageHandlerMapping(ApplicationContext applicationContext) {
   return new WelcomePageHandlerMapping(new TemplateAvailabilityProviders(applicationContext),
         applicationContext, getWelcomePage(), this.mvcProperties.getStaticPathPattern());
}
</code></pre>

<p>*<em>满足访问/*</em> 的访问路径  **</p>

<p><strong>例如：localhost：8080/</strong></p>

<h3 id="4-页面的小图标-favicon">4. 页面的小图标 favicon</h3>

<pre><code class="language-java">@Configuration
		@ConditionalOnProperty(value = &quot;spring.mvc.favicon.enabled&quot;, matchIfMissing = true)
		public static class FaviconConfiguration implements ResourceLoaderAware {

			private final ResourceProperties resourceProperties;

			private ResourceLoader resourceLoader;

			public FaviconConfiguration(ResourceProperties resourceProperties) {
				this.resourceProperties = resourceProperties;
			}

			@Override
			public void setResourceLoader(ResourceLoader resourceLoader) {
				this.resourceLoader = resourceLoader;
			}

			@Bean
			public SimpleUrlHandlerMapping faviconHandlerMapping() {
				SimpleUrlHandlerMapping mapping = new SimpleUrlHandlerMapping();
				mapping.setOrder(Ordered.HIGHEST_PRECEDENCE + 1);
              
				mapping.setUrlMap(Collections.singletonMap(&quot;**/favicon.ico&quot;, faviconRequestHandler()));
				return mapping;
			}

			@Bean
			public ResourceHttpRequestHandler faviconRequestHandler() {
				ResourceHttpRequestHandler requestHandler = new ResourceHttpRequestHandler();
				requestHandler.setLocations(resolveFaviconLocations());
				return requestHandler;
			}

			private List&lt;Resource&gt; resolveFaviconLocations() {
				String[] staticLocations = getResourceLocations(this.resourceProperties.getStaticLocations());
				List&lt;Resource&gt; locations = new ArrayList&lt;&gt;(staticLocations.length + 1);
				Arrays.stream(staticLocations).map(this.resourceLoader::getResource).forEach(locations::add);
				locations.add(new ClassPathResource(&quot;/&quot;));
				return Collections.unmodifiableList(locations);
			}

		}
</code></pre>

<ul>
<li><p><strong>默认就是启动的</strong></p></li>

<li><p><strong>同样是满足/**的映射路径</strong></p></li>
</ul>

<p>​</p>

<p>​</p>

<p>​</p>

<p>​</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/spring/" rel="tag">Spring</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/springboot/" rel="tag">SpringBoot</a></li>
	</ul>
</div>
		</footer>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="袁阊越 avatar" src="/post/img/avatar.jpg" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">About 袁阊越</span>
	</div>
	<div class="authorbox__description">
		There&#39;s only being in and then being out.
	</div>
</div>

<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/post/%E6%A1%B6%E6%8E%92%E5%BA%8F/" rel="prev"><span class="post-nav__caption">«&thinsp;Previous</span><p class="post-nav__post-title">桶排序</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/post/springboot%E4%B8%8Eweb%E5%BC%80%E5%8F%91%E4%BA%8C/" rel="next"><span class="post-nav__caption">Next&thinsp;»</span><p class="post-nav__post-title">SpringBoot与web开发(二)-----Thymeleaf 模板引擎</p></a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2019 袁阊越.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>